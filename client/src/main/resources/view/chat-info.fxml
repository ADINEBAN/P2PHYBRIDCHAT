<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.text.*?>

<VBox fx:id="root" prefWidth="300.0" styleClass="info-sidebar" stylesheets="@../styles.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.client.controller.ChatInfoController">

    <VBox alignment="CENTER" spacing="10.0">
        <padding><Insets bottom="20" top="30" /></padding>

        <StackPane>
            <Circle fill="#e0e0e0" radius="40.0" />
            <ImageView fx:id="avatarView" fitHeight="80.0" fitWidth="80.0" pickOnBounds="true" preserveRatio="false">
                <clip><Circle centerX="40" centerY="40" radius="40" /></clip>
            </ImageView>

            <Button fx:id="changeAvatarBtn" managed="false" onAction="#handleChangeGroupAvatar" styleClass="btn-camera-overlay" text="ðŸ“·" visible="false" StackPane.alignment="BOTTOM_RIGHT">
                <tooltip><Tooltip text="Äá»•i áº£nh nhÃ³m" /></tooltip>
            </Button>
        </StackPane>

        <Label fx:id="nameLabel" text="TÃªn há»™i thoáº¡i" textAlignment="CENTER" textFill="#333333" wrapText="true">
            <font><Font name="Segoe UI Bold" size="20.0" /></font>
        </Label>


    </VBox>

    <HBox alignment="CENTER" spacing="20.0">
        <padding><Insets bottom="20" /></padding>
        <VBox alignment="CENTER" spacing="5">
            <Button onAction="#handleSearchMessage" styleClass="btn-circle-action" text="ðŸ”" />
            <Label style="-fx-font-size: 11px;" text="TÃ¬m kiáº¿m" textFill="#65676b" />
        </VBox>
    </HBox>

    <Separator opacity="0.1" />

    <ScrollPane fitToWidth="true" styleClass="scroll-pane" VBox.vgrow="ALWAYS">
        <VBox spacing="0">

            <TitledPane animated="true" expanded="true" text="TÃ¹y chá»‰nh Ä‘oáº¡n chat">
                <content>
                    <VBox spacing="2" style="-fx-padding: 0;">
                        <Button onAction="#handleChangeTheme" styleClass="menu-item-btn" text="ðŸŽ¨  Äá»•i chá»§ Ä‘á» (Ná»n)" />
                        <Button onAction="#handleEditNickname" styleClass="menu-item-btn" text="ðŸ…°  Chá»‰nh sá»­a biá»‡t danh" />
                        <Button onAction="#handleViewPinnedMessages" styleClass="menu-item-btn" text="ðŸ“Œ  Xem tin nháº¯n Ä‘Ã£ ghim" />
                    </VBox>
                </content>
            </TitledPane>

            <Accordion fx:id="infoAccordion" style="-fx-background-color: transparent;">
                <panes>
                    <TitledPane fx:id="membersPane" animated="true" text="ThÃ nh viÃªn nhÃ³m">
                        <content>
                            <VBox prefHeight="129.0" prefWidth="298.0" spacing="10" style="-fx-background-color: transparent; -fx-padding: 0;">
                                <Button fx:id="addMemberBtn" maxWidth="Infinity" onAction="#handleAddMember" prefHeight="28.0" prefWidth="170.0" styleClass="btn-outline-blue" text="thÃªm thÃ nh viÃªn" />

                                <ListView fx:id="memberListView" prefHeight="200" styleClass="list-view" />
                            </VBox>
                        </content>
                    </TitledPane>

                    <TitledPane animated="true" text="File phÆ°Æ¡ng tiá»‡n &amp; file">
                        <content>
                            <VBox spacing="10" style="-fx-background-color: transparent;">
                                <Button onAction="#handleViewMedia" styleClass="sub-menu-btn" text="ðŸ–¼  File phÆ°Æ¡ng tiá»‡n" />
                                <Button onAction="#handleViewFiles" styleClass="sub-menu-btn" text="ðŸ“„  File tÃ i liá»‡u" />
                            </VBox>
                        </content>
                    </TitledPane>
                </panes>
            </Accordion>

            <VBox fx:id="adminControls" alignment="CENTER" managed="false" spacing="5" style="-fx-padding: 10;" visible="false">
                <Button fx:id="editGroupBtn" maxWidth="Infinity" onAction="#handleEditGroupName" styleClass="menu-item-btn" text="âœ Äá»•i tÃªn nhÃ³m" />
                <Button fx:id="dissolveGroupBtn" maxWidth="Infinity" onAction="#handleDissolveGroup" style="-fx-text-fill: red; -fx-background-color: transparent; -fx-font-weight: bold;" text="ðŸ—‘ Giáº£i tÃ¡n nhÃ³m" />
            </VBox>

            <VBox alignment="CENTER" style="-fx-padding: 20 0 20 0;">
                <Button fx:id="leaveGroupBtn" managed="false" onAction="#handleLeaveGroup" style="-fx-background-color: #ffebee; -fx-text-fill: #c62828; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 20; -fx-padding: 8 20;" text="Rá»i khá»i nhÃ³m" visible="false" />
            </VBox>

        </VBox>
    </ScrollPane>
</VBox>
